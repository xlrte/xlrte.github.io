"use strict";(self.webpackChunkxlrte_dev=self.webpackChunkxlrte_dev||[]).push([[983],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return d}});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),m=c(r),d=i,f=m["".concat(l,".").concat(d)]||m[d]||p[d]||o;return r?n.createElement(f,s(s({ref:t},u),{},{components:r})):n.createElement(f,s({ref:t},u))}));function d(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,s=new Array(o);s[0]=m;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:i,s[1]=a;for(var c=2;c<o;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},7660:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return a},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return m}});var n=r(7462),i=r(3366),o=(r(7294),r(3905)),s=["components"],a={sidebar_position:4},l="Setup your first service",c={unversionedId:"getting-started/first-service",id:"getting-started/first-service",isDocsHomePage:!1,title:"Setup your first service",description:"If you want some more context, you can look at our example project, which roughly mirrors this example.",source:"@site/docs/getting-started/first-service.md",sourceDirName:"getting-started",slug:"/getting-started/first-service",permalink:"/docs/getting-started/first-service",editUrl:"https://github.com/xlrte/website/edit/main/docs/getting-started/first-service.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Initialize your first environment",permalink:"/docs/getting-started/initialize-your-environment"},next:{title:"Deploy your service",permalink:"/docs/getting-started/deploy"}},u=[{value:"Inspect your initialized environment",id:"inspect-your-initialized-environment",children:[{value:"resources.yaml",id:"resourcesyaml",children:[],level:3}],level:2},{value:"Your first service",id:"your-first-service",children:[{value:"A little bit about service version and artifact resolution",id:"a-little-bit-about-service-version-and-artifact-resolution",children:[],level:4}],level:2}],p={toc:u};function m(e){var t=e.components,r=(0,i.Z)(e,s);return(0,o.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"setup-your-first-service"},"Setup your first service"),(0,o.kt)("p",null,"If you want some more context, you can look at our ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/xlrte/example-app-gcp"},"example project"),", which roughly mirrors this example."),(0,o.kt)("h2",{id:"inspect-your-initialized-environment"},"Inspect your initialized environment"),(0,o.kt)("p",null,"If you initialized an environment in the previous step, you should now have something like this in your git repository (assuming you use git):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},".xlrte/config/\n             services/\n             environments/[environment name]/resources.yaml\n             environments/[environment name]/pubkeys/[your name & email].asc\n")),(0,o.kt)("h3",{id:"resourcesyaml"},"resources.yaml"),(0,o.kt)("p",null,"Your ",(0,o.kt)("inlineCode",{parentName:"p"},"resources.yaml")," should look something like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"context: [gcp project you chose]\nregion: [gcp region]\n")),(0,o.kt)("p",null,"A key concept of ",(0,o.kt)("inlineCode",{parentName:"p"},"xlrte")," is separation of concerns, this means your service definitions should be a baseline, and anything environment specific should strictly live in the specific environment folder. ",(0,o.kt)("inlineCode",{parentName:"p"},"resources.yaml")," is used to define exactly what it sounds like: environment specific resources, such as compute resources etc for services."),(0,o.kt)("p",null,"For now, you do not need to concern yourself with any configuration, as by default we provide sensible defaults for a low-traffic, cheap-to-run development environment."),(0,o.kt)("h2",{id:"your-first-service"},"Your first service"),(0,o.kt)("p",null,"To add your first service, simply create a file such as ",(0,o.kt)("inlineCode",{parentName:"p"},".xlrte/config/services/my-shiny-new-services.yaml"),". This will be the baseline for this service in ",(0,o.kt)("em",{parentName:"p"},"any")," environment."),(0,o.kt)("p",null,"A minimal content for your service-yaml would be:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"name: my-shiny-service # the name of your service\nruntime: cloudrun # runtime, at the moment, only cloudrun supported\nspec:\n  base_name: hello-app \n  http:\n    public: true #should this service be publicly accessible?\n    http2: false #should we use http2, for instance for gRPC?\n")),(0,o.kt)("p",null,"The comments in the example explain most of the fields. We should perhaps explain ",(0,o.kt)("inlineCode",{parentName:"p"},"base_name")," a little more closely:"),(0,o.kt)("h4",{id:"a-little-bit-about-service-version-and-artifact-resolution"},"A little bit about service version and artifact resolution"),(0,o.kt)("p",null,"We assume the following things:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Your service Docker image is pushed to the ",(0,o.kt)("inlineCode",{parentName:"li"},"Google Container Registry")," of the same project that hosts your xlrte environment."),(0,o.kt)("li",{parentName:"ul"},"The versions of your service are either defined in ",(0,o.kt)("inlineCode",{parentName:"li"},".xlrte/config/environments/[env]/versions.yaml")," as simple `","[servicename]",": ","[version]"," key-pairs OR",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"you use the ",(0,o.kt)("inlineCode",{parentName:"li"},"-v")," flag at runtime to define the version, but this will set the same version for ALL services, should you have more than one.")))),(0,o.kt)("p",null,"Based on these assumptions, xlrte will put together the correct artifact to deploy."))}m.isMDXComponent=!0}}]);